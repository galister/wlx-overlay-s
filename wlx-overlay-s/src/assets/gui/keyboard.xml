<layout>
  <macro name="keycap_rect"
    margin="2" width="100%" overflow="hidden" box_sizing="border_box"
    border_color="~color_accent_translucent" border="2" round="8" color="~color_accent_40" color2="~color_accent_10" gradient="vertical"
    align_items="center" justify_content="center" />

  <macro name="keycap_div"
    width="${width}" height="${height}" min_width="${width}" min_height="${height}" max_width="${width}" max_height="${height}"
  />

  <macro name="bg_rect" width="100%" color="~color_bg" round="16" border="2" border_color="~color_accent"/>
  
  <!-- The keyboard is build from the xkb keymap. This file is for customizing the keycaps. -->

  <!-- Key cap with a single label. -->
  <!-- Used for special keys. -->
  <template name="KeySpecial">
    <div macro="keycap_div">
      <rectangle id="${id}" macro="keycap_rect">
        <sprite color="~color_text" width="32" height="32" src="keyboard/${text}.svg" />
      </rectangle>
    </div>
  </template>

  <!-- Key cap with a single label. -->
  <!-- Used for letter keys on layouts without AltGr. -->
  <template name="KeyLetter">
    <div macro="keycap_div">
      <rectangle id="${id}" macro="keycap_rect">
        <label text="${text}" size="24" />
      </rectangle>
    </div>
  </template>

  <!-- Key cap with a primary label on top and an AltGr label on bottom. -->
  <!-- Used for letter keys on layouts with AltGr. -->
  <template name="KeyLetterAltGr">
    <div macro="keycap_div">
      <rectangle id="${id}" macro="keycap_rect" gap="4">
        <label text="${text}" size="24" />
        <label color="~color_text_translucent" text="${text_altgr}" size="24" />
      </rectangle>
    </div>
  </template>

  <!-- Key cap with a primary label on bottom and a Shift label on top. -->
  <!-- Used for number & symbol keys on layouts without AltGr. -->
  <template name="KeySymbol">
    <div macro="keycap_div">
      <rectangle id="${id}" macro="keycap_rect" gap="4">
        <label color="~color_text_translucent" text="${text_shift}" size="24" />
        <label text="${text}" size="24" />
      </rectangle>
    </div>
  </template>

  <!-- Key cap with a primary label on bottom-left, an AltGr label on bottom-right, Shift label on top-left. -->
  <!-- Used for number & symbol keys on layouts with AltGr. -->
  <template name="KeySymbolAltGr">
    <div macro="keycap_div">
      <rectangle id="${id}" macro="keycap_rect" flex_direction="row" flex_wrap="wrap">
        <div width="50%" height="50%" align_items="center" justify_content="center">
          <label color="~color_text_translucent" text="${text_shift}" size="24" />
        </div>
        <div width="50%" height="50%" align_items="center" justify_content="center" />
        <div width="50%" height="50%" align_items="center" justify_content="center">
          <label text="${text}" size="24" />
        </div>
        <div width="50%" height="50%" align_items="center" justify_content="center">
          <label color="~color_text_translucent" text="${text_altgr}" size="24" />
        </div>
      </rectangle>
    </div>
  </template>

  
  <!-- An app with a single icon. -->
  <template name="AppIcon">
    <div macro="keycap_div" width="80" height="80">
      <rectangle id="${id}" macro="keycap_rect">
        <sprite color="~color_text" width="32" height="32" src="${src}" />
      </rectangle>
    </div>
  </template>

  <elements>
    <div flex_direction="column" interactable="0">
      <rectangle macro="bg_rect" padding="16" align_items="center" justify_content="space_between">
        <div id="bar_root">
          <AppIcon id="test1" />
          <AppIcon id="test2" />
          <AppIcon id="test3" />
        </div>
        <div id="tray_root">
          <div align_items="center" flex_direction="column" gap="4">
            <label text="23:59" _source="clock" _display="time" size="28" />
            <label text="Tuesday" _source="clock" _display="dow" size="22" />
            <label text="22/2/2022" _source="clock" _display="date" size="22" />
          </div>
        </div>
      </rectangle>
      <div width="100%" height="20" interactable="0" />
      <rectangle id="keyboard_root" macro="bg_rect" flex_direction="column" padding="16">
      </rectangle>
    </div>
  </elements>

</layout>
